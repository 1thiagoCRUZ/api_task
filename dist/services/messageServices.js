const supabase=require("../config/database");module.exports={sendMessage:async(e,s)=>{const{sender_id:r,receiver_id:a,message:n}=e,{data:d,error:t}=await supabase.from("messages").insert([{sender_id:r,receiver_id:a,message:n}]);return t?s(t):s(null,d)},getMessages:async(e,s)=>{const{user_id:r,other_user_id:a}=e;try{const{data:e,error:n}=await supabase.from("messages").select("*").or(`and(sender_id.eq.${r},receiver_id.eq.${a}),and(sender_id.eq.${a},receiver_id.eq.${r})`).order("created_at",{ascending:!0});if(n)throw n;return e&&0!==e.length?s(null,{success:1,data:e}):s(null,{success:0,message:"No messages found"})}catch(e){return console.error("Error fetching messages:",e.message),s({success:0,message:"Internal Server Error",error:e.message})}}};