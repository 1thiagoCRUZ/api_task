const supabase=require("../config/database");module.exports={createUser:async(e,r)=>{const{email:s,name:a,avatar_url:t,phone:n,institution:o,type:u,password:i}=e;try{const{data:e,error:c}=await supabase.auth.signUp({email:s,password:i});return c?r(c):(await supabase.from("users").insert([{email:s,name:a,avatar_url:t,phone:n,institution:o,type:u||"user",user_id:e.user.id}]),r(null,e))}catch(e){return console.error("Error creating user:",e.message),r({success:0,message:"Internal Server Error",error:e.message})}},getAllUsers:async(e,r)=>{try{const{data:s,error:a}=await supabase.from("users").select("id, email, name, avatar_url, phone, institution, type").neq("id",e);if(a)throw a;return s&&0!==s.length?r(null,{success:1,data:s}):r({success:0,message:"No users found"})}catch(e){return console.error("Error fetching users:",e.message),r({success:0,message:"Internal Server Error",error:e.message})}}};